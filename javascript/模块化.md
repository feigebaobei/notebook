# 模块化

在没有全局污染的情况下，更好的组织项目代码。  
模块就是实现特定功能的一组方法。  

## 模块化的进化  

### 原始写法  

    // define
    funtion m1 () {...}
    funtion m2 () {...}
    // use
    m1()
    m2()

会污染全局变量。  

### 对象写法

    // define
    var obj = new Object({
        _count: 0,
        m1: function () {
            ...
        },
        m1: function () {
            ...
        }
    })
    // use
    obj.m1()
    obj.m2()

对象内部所有成员都暴露在外面。  

### 立即执行函数

    var obj = (function () {
        var _count = 0
        var m1 = function m1 () {...}
        var m2 = function m2 () {...}
        return {
            m1: m1,
            m2: m2
        }
    })()

外部访问不到内部的`_count`  

### 放大模式

    var obj = (function (mod) {
        mod.m3 = function () {...}
        return mod
    })(obj)

### 宽放大模式

    var obj = (function (mod) {
        ... 
        return mod
    })(window.obj {})

### 
### 
### 
### 

##CommonJS

exports\module.exports  
不能赋值变量\可赋值任意数据类型  
require  

##AMD

Asynchronous Module Definition 异步模块定义。  
require.js(此规范的代表)  
异步加载，不阻塞页面的加载，能并行加载多个模块，但不能按需加载，必须提前加载所需依赖。  
define(id?, []?, callback)  
模块id\依赖其它模块\回调函数  
require([module], callback)  
需要引入的模块\回调函数  

##CMD

在定义之初声明所有依赖。可以在任意时机动态引入模块。  
可以按需加载。  
由阿里的玉伯提出。  

##UMD

##es6的module规范

es6在语言标准的层面上实现了模块功能。  
export\export default\import  
输出的是对象\输出的是一个叫default的变量或方法\引入（import v from 'mn'\import {v as vv} from 'mn'）  
在浏览器中使用es6需要使用script标签且指定type属性为module.  
`<scrip type="module">import v from './mn.js'/*other code*/</script>`